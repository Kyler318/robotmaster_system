<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboMaster æ¥µé€Ÿäº‚é¬¥ç®¡ç†ç³»çµ± v2.0</title>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, writeBatch, deleteDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // â˜…â˜…â˜… è«‹å°‡æ­¤è™•æ›¿æ›ç‚ºæ‚¨çš„ Firebase Config â˜…â˜…â˜…
        const firebaseConfig = {
            apiKey: "AIzaSyBdAMarLmul5OZgC_yIBs_pfkDvA2BWLFM",
            authDomain: "robomaster-competition.firebaseapp.com",
            projectId: "robomaster-competition",
            storageBucket: "robomaster-competition.firebasestorage.app",
            messagingSenderId: "681333907764",
            appId: "1:681333907764:web:f5fb267d6f7527a1348561"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                // åŸºç¤ç‹€æ…‹
                const currentView = ref('schedule'); // schedule, checkin, admin
                const adminStage = ref('prelim'); // prelim, semi, final (è£åˆ¤é é¢çš„å­åˆ†é )
                const newPlayerName = ref('');
                const newPlayerGroup = ref('A');
                
                // æ•¸æ“šå­˜å„²
                const players = ref([]);
                const matches = ref([]);

                // --- æ•¸æ“šç›£è½ ---
                onMounted(() => {
                    onSnapshot(collection(db, "players"), (snapshot) => {
                        players.value = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
                    });
                    onSnapshot(collection(db, "matches"), (snapshot) => {
                        matches.value = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
                    });
                });

                // --- åŠŸèƒ½ 1: æ¸¬è©¦æ•¸æ“šç”Ÿæˆ ---
                const generateTestData = async () => {
                    if (!confirm("é€™å°‡ç”Ÿæˆ60åæ¸¬è©¦é¸æ‰‹ï¼Œç¢ºå®šå—ï¼Ÿ")) return;
                    const batch = writeBatch(db);
                    
                    // ç”Ÿæˆ A çµ„ 32 äºº
                    for (let i = 1; i <= 32; i++) {
                        const ref = doc(collection(db, "players"));
                        batch.set(ref, { name: `Açµ„åŒå­¸-${i}`, group: 'A', status: 'registered' });
                    }
                    // ç”Ÿæˆ B çµ„ 28 äºº
                    for (let i = 1; i <= 28; i++) {
                        const ref = doc(collection(db, "players"));
                        batch.set(ref, { name: `Bçµ„åŒå­¸-${i}`, group: 'B', status: 'registered' });
                    }
                    
                    await batch.commit();
                    alert("å·²ç”Ÿæˆ 60 ä½æ¸¬è©¦é¸æ‰‹ï¼");
                };

                // --- åŠŸèƒ½ 2: æª¢éŒ„ ---
                const addPlayer = async () => {
                    if (!newPlayerName.value) return alert("è«‹è¼¸å…¥å§“å");
                    await addDoc(collection(db, "players"), {
                        name: newPlayerName.value,
                        group: newPlayerGroup.value,
                        status: 'registered'
                    });
                    newPlayerName.value = '';
                    alert("å ±åæˆåŠŸ");
                };

                // æ¸…ç©ºé‡ç½®
                const resetData = async () => {
                   if(!confirm("âš ï¸ è­¦å‘Šï¼šé€™å°‡åˆªé™¤æ‰€æœ‰é¸æ‰‹å’Œè³½ç¨‹ï¼ç¢ºå®šå—ï¼Ÿ")) return;
                   const pSnaps = await getDocs(collection(db, "players"));
                   pSnaps.forEach(d => deleteDoc(doc(db, "players", d.id)));
                   const mSnaps = await getDocs(collection(db, "matches"));
                   mSnaps.forEach(d => deleteDoc(doc(db, "matches", d.id)));
                   alert("æ•¸æ“šå·²å…¨éƒ¨æ¸…ç©º");
                };

                // --- æ ¸å¿ƒç®—æ³• ---
                const shuffle = (array) => array.sort(() => Math.random() - 0.5);

                // --- åŠŸèƒ½ 3: å¢é‡ç”Ÿæˆåˆè³½ ---
                const generatePrelims = async () => {
                    // 1. æ‰¾å‡ºæ‰€æœ‰å·²ç¶“åœ¨æ¯”è³½ä¸­çš„é¸æ‰‹ ID
                    const activePlayerIds = new Set();
                    matches.value.forEach(m => {
                        m.players.forEach(p => activePlayerIds.add(p.id));
                    });

                    // 2. éæ¿¾å‡ºã€Œå°šæœªåƒè³½ã€çš„é¸æ‰‹
                    const unassignedA = players.value.filter(p => p.group === 'A' && !activePlayerIds.has(p.id));
                    const unassignedB = players.value.filter(p => p.group === 'B' && !activePlayerIds.has(p.id));

                    if (unassignedA.length === 0 && unassignedB.length === 0) {
                        return alert("æ²’æœ‰æ–°é¸æ‰‹éœ€è¦æ’ç¨‹ (æ‰€æœ‰äººéƒ½å·²å®‰æ’æ¯”è³½)");
                    }

                    const batch = writeBatch(db);
                    let matchCount = 0;

                    // è™•ç† A çµ„æœªå®‰æ’çš„äºº
                    const shuffledA = shuffle([...unassignedA]);
                    for (let i = 0; i < shuffledA.length; i += 4) {
                        const chunk = shuffledA.slice(i, i + 4);
                        const matchRef = doc(collection(db, "matches"));
                        batch.set(matchRef, {
                            round: 'prelim',
                            group: 'A',
                            players: chunk,
                            room: 'Room 1', // Açµ„é è¨­ Room 1
                            winnerId: null,
                            createdAt: Date.now()
                        });
                        matchCount++;
                    }

                    // è™•ç† B çµ„æœªå®‰æ’çš„äºº
                    const shuffledB = shuffle([...unassignedB]);
                    for (let i = 0; i < shuffledB.length; i += 4) {
                        const chunk = shuffledB.slice(i, i + 4);
                        const matchRef = doc(collection(db, "matches"));
                        batch.set(matchRef, {
                            round: 'prelim',
                            group: 'B',
                            players: chunk,
                            room: 'Room 2', // Bçµ„é è¨­ Room 2
                            winnerId: null,
                            createdAt: Date.now()
                        });
                        matchCount++;
                    }

                    await batch.commit();
                    alert(`å·²ç‚ºæ–°åˆ°å ´çš„é¸æ‰‹ç”Ÿæˆäº† ${matchCount} å ´åˆè³½ï¼`);
                };

                const generateSemis = async () => {
                    // æª¢æŸ¥æ˜¯å¦é‚„æœ‰æœªå®Œæˆçš„åŠæ±ºè³½
                    if(matches.value.some(m => m.round === 'semi' && !m.winnerId)) {
                        if(!confirm("å°šæœ‰åŠæ±ºè³½æœªå®Œæˆï¼Œç¢ºå®šè¦ç”Ÿæˆæ–°çš„åŠæ±ºè³½å—ï¼Ÿ")) return;
                    }

                    // ç²å–åˆè³½æ™‰ç´šè€…ï¼Œä¸”å°šæœªåƒåŠ éåŠæ±ºè³½çš„äºº
                    const activeSemiIds = new Set();
                    matches.value.filter(m => m.round === 'semi').forEach(m => {
                        m.players.forEach(p => activeSemiIds.add(p.id));
                    });

                    const prelimWinners = matches.value
                        .filter(m => m.round === 'prelim' && m.winnerId)
                        .map(m => m.players.find(p => p.id === m.winnerId))
                        .filter(p => !activeSemiIds.has(p.id)); // éæ¿¾æ‰å·²æ’åŠæ±ºè³½çš„äºº

                    if (prelimWinners.length === 0) return alert("æ²’æœ‰å¾…å®šæ’ç¨‹çš„æ™‰ç´šè€…");

                    const shuffled = shuffle([...prelimWinners]);
                    const batch = writeBatch(db);

                    for (let i = 0; i < shuffled.length; i += 3) {
                        const chunk = shuffled.slice(i, i + 3);
                        const matchRef = doc(collection(db, "matches"));
                        batch.set(matchRef, {
                            round: 'semi',
                            group: 'Merged',
                            players: chunk,
                            room: i % 2 === 0 ? 'Room 1' : 'Room 2',
                            winnerId: null,
                            createdAt: Date.now()
                        });
                    }
                    await batch.commit();
                    alert("åŠæ±ºè³½è³½ç¨‹ç”Ÿæˆå®Œç•¢ï¼");
                };

                const generateFinal = async () => {
                     // æª¢æŸ¥æ±ºè³½æ˜¯å¦å·²å­˜åœ¨
                    if(matches.value.some(m => m.round === 'final')) {
                        if(!confirm("æ±ºè³½å·²ç¶“å­˜åœ¨ï¼Œè¦é‡æ–°ç”Ÿæˆå—ï¼Ÿ(é€™å°‡è¦†è“‹èˆŠæ±ºè³½)")) return;
                        // æ­¤è™•åƒ…åšç°¡å–®æ–°å¢ï¼Œä¸åˆªé™¤èˆŠçš„
                    }

                    const semiWinners = matches.value
                        .filter(m => m.round === 'semi' && m.winnerId)
                        .map(m => m.players.find(p => p.id === m.winnerId));
                    
                    if (semiWinners.length === 0) return alert("é‚„æ²’æœ‰åŠæ±ºè³½æ™‰ç´šè€…");

                    await addDoc(collection(db, "matches"), {
                        round: 'final',
                        group: 'Final',
                        players: semiWinners, 
                        room: 'Main Stage',
                        winnerId: null
                    });
                    alert("æ±ºè³½ç”Ÿæˆï¼");
                };

                const setWinner = async (match, winnerId) => {
                    if(!confirm(`ç¢ºèª ${match.players.find(p=>p.id===winnerId).name} ç²å‹ï¼Ÿ`)) return;
                    await updateDoc(doc(db, "matches", match.id), { winnerId: winnerId });
                };

                // åˆ†é¡è¨ˆç®—å±¬æ€§
                const prelimMatches = computed(() => matches.value.filter(m => m.round === 'prelim').sort((a,b)=>a.createdAt - b.createdAt));
                const semiMatches = computed(() => matches.value.filter(m => m.round === 'semi').sort((a,b)=>a.createdAt - b.createdAt));
                const finalMatches = computed(() => matches.value.filter(m => m.round === 'final'));

                return {
                    currentView, adminStage,
                    newPlayerName, newPlayerGroup, players,
                    addPlayer, generateTestData, resetData,
                    generatePrelims, generateSemis, generateFinal,
                    prelimMatches, semiMatches, finalMatches,
                    setWinner
                };
            }
        }).mount('#app');
    </script>
</head>
<body class="bg-gray-100 min-h-screen text-gray-800 font-sans">
    <div id="app" class="max-w-5xl mx-auto bg-white shadow-2xl min-h-screen flex flex-col">
        
        <!-- é ‚éƒ¨å°èˆª -->
        <nav class="flex text-lg font-bold text-white bg-slate-800">
            <button @click="currentView='schedule'" :class="currentView=='schedule'?'bg-blue-600':'hover:bg-slate-700'" class="flex-1 py-4 transition">ğŸ“Š è§€çœ¾/è³½ç¨‹</button>
            <button @click="currentView='checkin'" :class="currentView=='checkin'?'bg-blue-600':'hover:bg-slate-700'" class="flex-1 py-4 transition">ğŸ“ æª¢éŒ„è™•</button>
            <button @click="currentView='admin'" :class="currentView=='admin'?'bg-blue-600':'hover:bg-slate-700'" class="flex-1 py-4 transition">âš–ï¸ è£åˆ¤/æ§å°</button>
        </nav>

        <!-- é é¢å…§å®¹å€ -->
        <main class="p-6 flex-1">
            
            <!-- 1. æª¢éŒ„é é¢ -->
            <div v-if="currentView === 'checkin'" class="space-y-6">
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                    <h2 class="text-xl font-bold mb-4">æ–°å¢é¸æ‰‹</h2>
                    <div class="flex flex-col md:flex-row gap-2">
                        <input v-model="newPlayerName" type="text" placeholder="è¼¸å…¥é¸æ‰‹å§“å" class="border-2 border-gray-300 p-2 flex-1 rounded focus:border-blue-500 outline-none">
                        <select v-model="newPlayerGroup" class="border-2 border-gray-300 p-2 rounded w-full md:w-32">
                            <option value="A">Açµ„</option>
                            <option value="B">Bçµ„</option>
                        </select>
                        <button @click="addPlayer" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 rounded font-bold transition">å ±å</button>
                    </div>
                </div>

                <!-- æ¸¬è©¦åŠŸèƒ½å€ -->
                <div class="bg-gray-100 p-4 rounded border border-gray-300 flex justify-between items-center">
                    <span class="text-sm text-gray-500">é–‹ç™¼æ¸¬è©¦å°ˆç”¨ï¼š</span>
                    <button @click="generateTestData" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-1 rounded text-sm">ğŸ§ª ä¸€éµå¡«å…¥ 60 äººæ¸¬è©¦åå–®</button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold text-blue-800 mb-2 border-b pb-1">Açµ„åå–® ({{ players.filter(p=>p.group=='A').length }})</h3>
                        <ul class="max-h-96 overflow-y-auto bg-gray-50 p-2 rounded">
                            <li v-for="p in players.filter(p=>p.group=='A')" :key="p.id" class="py-1 border-b last:border-0 border-gray-200">{{ p.name }}</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-green-800 mb-2 border-b pb-1">Bçµ„åå–® ({{ players.filter(p=>p.group=='B').length }})</h3>
                        <ul class="max-h-96 overflow-y-auto bg-gray-50 p-2 rounded">
                            <li v-for="p in players.filter(p=>p.group=='B')" :key="p.id" class="py-1 border-b last:border-0 border-gray-200">{{ p.name }}</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 2. è£åˆ¤é é¢ (å·²åˆ†é å„ªåŒ–) -->
            <div v-if="currentView === 'admin'">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">è³½ç¨‹æ§åˆ¶ä¸­å¿ƒ</h2>
                    <button @click="resetData" class="bg-red-100 text-red-600 hover:bg-red-200 px-3 py-1 rounded text-sm border border-red-200">âš ï¸ é‡ç½®æ‰€æœ‰æ•¸æ“š</button>
                </div>

                <!-- è£åˆ¤å­å°èˆª -->
                <div class="flex mb-6 border-b-2 border-gray-200">
                    <button @click="adminStage='prelim'" :class="adminStage=='prelim'?'border-b-4 border-purple-600 text-purple-700':'text-gray-500'" class="px-6 py-2 font-bold transition">1. åˆè³½éšæ®µ</button>
                    <button @click="adminStage='semi'" :class="adminStage=='semi'?'border-b-4 border-indigo-600 text-indigo-700':'text-gray-500'" class="px-6 py-2 font-bold transition">2. åŠæ±ºè³½éšæ®µ</button>
                    <button @click="adminStage='final'" :class="adminStage=='final'?'border-b-4 border-yellow-600 text-yellow-700':'text-gray-500'" class="px-6 py-2 font-bold transition">3. æ±ºè³½éšæ®µ</button>
                </div>

                <!-- åˆè³½ç®¡ç† -->
                <div v-if="adminStage === 'prelim'">
                    <div class="bg-purple-50 p-4 rounded mb-4 flex justify-between items-center">
                        <div>
                            <p class="font-bold text-purple-900">ç”Ÿæˆåˆè³½è³½ç¨‹</p>
                            <p class="text-sm text-purple-600">ç³»çµ±æœƒè‡ªå‹•æª¢æ¸¬æ–°å¢çš„é²åˆ°é¸æ‰‹ï¼Œä¸¦åªç‚ºä»–å€‘ç”Ÿæˆæ–°å ´æ¬¡ï¼Œä¸å½±éŸ¿èˆŠè³½ç¨‹ã€‚</p>
                        </div>
                        <button @click="generatePrelims" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded shadow">ç”Ÿæˆ/æ›´æ–°åˆè³½</button>
                    </div>
                    
                    <div class="grid gap-4">
                        <div v-for="(match, idx) in prelimMatches" :key="match.id" class="bg-white border p-4 rounded shadow-sm flex flex-col md:flex-row justify-between items-center gap-4">
                            <div class="font-bold text-gray-500 whitespace-nowrap">
                                <span class="px-2 py-1 rounded text-white text-xs mr-2" :class="match.group=='A'?'bg-blue-400':'bg-green-400'">{{match.group}}çµ„</span>
                                {{ match.room }}
                            </div>
                            <div class="flex flex-1 gap-2 w-full">
                                <button v-for="p in match.players" :key="p.id" @click="setWinner(match, p.id)" 
                                    :disabled="!!match.winnerId"
                                    :class="match.winnerId === p.id ? 'bg-green-500 text-white ring-2 ring-green-300' : 'bg-gray-50 hover:bg-gray-200'"
                                    class="flex-1 py-3 rounded border transition text-sm md:text-base">
                                    {{ p.name }}
                                    <span v-if="match.winnerId === p.id">ğŸ†</span>
                                </button>
                            </div>
                        </div>
                        <p v-if="prelimMatches.length === 0" class="text-center text-gray-400 py-10">æš«ç„¡åˆè³½è³½ç¨‹ï¼Œè«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•ç”Ÿæˆ</p>
                    </div>
                </div>

                <!-- åŠæ±ºè³½ç®¡ç† -->
                <div v-if="adminStage === 'semi'">
                    <div class="bg-indigo-50 p-4 rounded mb-4 flex justify-between items-center">
                        <div>
                            <p class="font-bold text-indigo-900">ç”ŸæˆåŠæ±ºè³½è³½ç¨‹</p>
                            <p class="text-sm text-indigo-600">å°‡åˆè³½æ™‰ç´šè€…æ··åˆ (3äººä¸€å±€)ã€‚</p>
                        </div>
                        <button @click="generateSemis" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded shadow">ç”ŸæˆåŠæ±ºè³½</button>
                    </div>
                    <div class="grid gap-4">
                        <div v-for="match in semiMatches" :key="match.id" class="bg-white border p-4 rounded shadow-sm flex flex-col md:flex-row justify-between items-center gap-4">
                            <div class="font-bold text-gray-500">{{ match.room }}</div>
                            <div class="flex flex-1 gap-2 w-full">
                                <button v-for="p in match.players" :key="p.id" @click="setWinner(match, p.id)" 
                                    :disabled="!!match.winnerId"
                                    :class="match.winnerId === p.id ? 'bg-green-500 text-white' : 'bg-gray-50 hover:bg-gray-200'"
                                    class="flex-1 py-3 rounded border transition">
                                    {{ p.name }} <span v-if="match.winnerId === p.id">ğŸ†</span>
                                </button>
                            </div>
                        </div>
                        <p v-if="semiMatches.length === 0" class="text-center text-gray-400 py-10">æš«ç„¡åŠæ±ºè³½è³½ç¨‹</p>
                    </div>
                </div>

                <!-- æ±ºè³½ç®¡ç† -->
                <div v-if="adminStage === 'final'">
                     <div class="bg-yellow-50 p-4 rounded mb-4 flex justify-between items-center">
                        <div>
                            <p class="font-bold text-yellow-900">ç”Ÿæˆæ±ºè³½è³½ç¨‹</p>
                            <p class="text-sm text-yellow-600">5äººä¸€å±€æ’åè³½ã€‚</p>
                        </div>
                        <button @click="generateFinal" class="bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2 rounded shadow">ç”Ÿæˆæ±ºè³½</button>
                    </div>
                    <div v-for="match in finalMatches" :key="match.id" class="bg-white border-2 border-yellow-400 p-6 rounded shadow-lg text-center">
                        <h3 class="text-2xl font-bold mb-4 text-yellow-600">ğŸ† å† è»çˆ­å¥ªæˆ° ğŸ†</h3>
                        <div class="flex flex-wrap gap-4 justify-center">
                             <button v-for="p in match.players" :key="p.id" @click="setWinner(match, p.id)" 
                                :disabled="!!match.winnerId"
                                :class="match.winnerId === p.id ? 'bg-yellow-500 text-white scale-110 shadow-lg' : 'bg-gray-50 hover:bg-gray-100'"
                                class="px-6 py-4 rounded-xl border transition text-lg font-bold">
                                {{ p.name }}
                                <span v-if="match.winnerId === p.id">ğŸ¥‡</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. è³½ç¨‹/è§€çœ¾é é¢ -->
            <div v-if="currentView === 'schedule'" class="space-y-8">
                
                <!-- æ±ºè³½å±•ç¤º -->
                <div v-if="finalMatches.length > 0">
                    <h3 class="text-center text-2xl font-bold text-yellow-600 mb-4">ğŸ† æ±ºè³½ - å·”å³°å°æ±º</h3>
                    <div v-for="m in finalMatches" class="bg-gradient-to-r from-yellow-100 to-yellow-50 p-6 rounded-xl border border-yellow-300 text-center shadow-lg">
                        <div class="flex flex-wrap justify-center gap-4">
                            <div v-for="p in m.players" class="px-6 py-3 bg-white rounded-full shadow font-bold text-lg" :class="{'ring-4 ring-yellow-400 text-yellow-700': m.winnerId===p.id}">
                                {{ p.name }}
                                <span v-if="m.winnerId===p.id">ğŸ¥‡å† è»</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åŠæ±ºè³½å±•ç¤º -->
                <div v-if="semiMatches.length > 0">
                    <h3 class="text-center text-xl font-bold text-indigo-700 mb-4">âš”ï¸ åŠæ±ºè³½ (3äººäº‚é¬¥)</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div v-for="(m, idx) in semiMatches" class="bg-white p-4 rounded shadow border-l-4 border-indigo-500">
                            <div class="text-gray-400 text-sm mb-2">åŠæ±ºè³½ {{idx+1}} ({{m.room}})</div>
                            <div class="space-y-1">
                                <div v-for="p in m.players" class="flex justify-between items-center p-1 px-2 rounded" :class="m.winnerId===p.id?'bg-green-100 text-green-800 font-bold':''">
                                    <span>{{ p.name }}</span>
                                    <span v-if="m.winnerId===p.id" class="text-xs bg-green-200 px-2 rounded-full">æ™‰ç´š</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åˆè³½å±•ç¤º -->
                <div>
                    <h3 class="text-center text-xl font-bold text-gray-700 mb-4">ğŸ åˆè³½ (4äººäº‚é¬¥)</h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div v-for="(m, idx) in prelimMatches" class="bg-white p-4 rounded shadow relative overflow-hidden">
                            <div class="absolute top-0 left-0 w-1 h-full" :class="m.group==='A'?'bg-blue-500':'bg-green-500'"></div>
                            <div class="flex justify-between mb-2">
                                <span class="text-xs font-bold px-2 py-0.5 rounded text-white" :class="m.group==='A'?'bg-blue-500':'bg-green-500'">{{m.group}}çµ„</span>
                                <span class="text-xs text-gray-400">{{m.room}}</span>
                            </div>
                            <div class="space-y-1">
                                <div v-for="p in m.players" class="flex justify-between text-sm p-1 rounded" :class="m.winnerId===p.id?'bg-green-100 font-bold text-green-800':''">
                                    <span>{{ p.name }}</span>
                                    <span v-if="m.winnerId===p.id">âœ…</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p v-if="prelimMatches.length === 0" class="text-center text-gray-400 mt-8">ç­‰å¾…è³½ç¨‹ç”Ÿæˆ...</p>
                </div>
            </div>

        </main>
    </div>
</body>
</html>